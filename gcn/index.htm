<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Center for New Testament Restoration</title>
    <meta charset="UTF-8" />
    <meta name="google" content="notranslate" />
    <meta name="viewport" content="width=device-width, initial-scale=.6" />
    <meta
      name="copyright"
      content="Copyright Â© 2013-2022 by Alan Bunning. All rights reserved. Copying or distribution without the authorâ€™s prior written consent is expressly prohibited."
    />
    <link rel=stylesheet type=text/css href=../style.css>
  </head>
  <body onkeypress="keypress(event)" onload="loadSettings()">
    <nav>
      <script src="../nav.js"></script>

      <div class="banner">
        <img src="../logo.png" alt="CNTR Logo" height="28" />&nbsp;&nbsp;Center
        for New Testament Restoration
      </div>
      <div class="menu">
        <label for="collapse" class="collapse">â˜°</label
        ><input type="checkbox" id="collapse" role="button" />
        <ul id="collapse">
          <li><a href="../home/index.htm" target="_self">Home</a></li>
          <li>
            <a href="#" target="_self">Services</a>
            <ul class="hidden">
              <li>
                <a href="../collation/index.htm" target="_self"
                  >&nbsp;Collation</a
                >
              </li>
              <li>
                <a href="../manuscripts/index.htm" target="_self"
                  >&nbsp;Manuscripts</a
                >
              </li>
              <li>
                <a href="../charutil/index.htm" target="_self"
                  >&nbsp;Character Tool</a
                >
              </li>
              <li>
                <a href="../resources/index.htm" target="_self"
                  >&nbsp;Resources</a
                >
              </li>
            </ul>
          </li>

          <li>
            <a href="#" target="_self">About</a>
            <ul class="hidden">
              <li>
                <a href="../overview/index.htm" target="_self"
                  >&nbsp;Overview</a
                >
              </li>
              <li>
                <a href="../status/index.htm" target="_self"
                  >&nbsp;Project Status</a
                >
              </li>
              <li>
                <a href="../credits/index.htm" target="_self">&nbsp;Credits</a>
              </li>
              <li>
                <a href="../terms/index.htm" target="_self"
                  >&nbsp;Terms of Use</a
                >
              </li>
            </ul>
          </li>

          <li>
            <a href="#" target="_self">Contact</a>
            <ul class="hidden">
              <li>
                <a href="../donate/index.htm" target="_self">&nbsp;Donate</a>
              </li>
              <li>
                <a href="../subscribe/index.htm" target="_self"
                  >&nbsp;Subscribe</a
                >
              </li>
              <li>
                <a href="../correspond/index.htm" target="_self"
                  >&nbsp;Correspond</a
                >
              </li>
              <li>
                <a href="../volunteer/index.htm" target="_self"
                  >&nbsp;Volunteer</a
                >
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
    <header>
      <form name="form" action="index.php" method="post">
        <span class="label">Collation</span>
        &nbsp;&nbsp;&nbsp;&nbsp;Verse
        <select name="books" id="books" onChange='refresh("chapter"); select()'>
          <option hidden>Genesis</option>
          <option hidden>Exodus</option>
          <option hidden>Leviticus</option>
          <option hidden>Numbers</option>
          <option hidden>Deuteronomy</option>
          <option hidden>Joshua</option>
          <option hidden>Judges</option>
          <option hidden>Ruth</option>
          <option hidden>1st Samuel</option>
          <option hidden>2nd Samuel</option>
          <option hidden>1st Kings</option>
          <option hidden>2nd Kings</option>
          <option hidden>1st Chronicles</option>
          <option hidden>2nd Chronicles</option>
          <option hidden>Exra</option>
          <option hidden>Nehemiah</option>
          <option hidden>Ester</option>
          <option hidden>Job</option>
          <option hidden>Psalms</option>
          <option hidden>Proverbs</option>
          <option hidden>Ecclesiastes</option>
          <option hidden>Song of Songs</option>
          <option hidden>Isaiah</option>
          <option hidden>Jeremiah</option>
          <option hidden>Lamentations</option>
          <option hidden>Ezekial</option>
          <option hidden>Daniel</option>
          <option hidden>Hosea</option>
          <option hidden>Joel</option>
          <option hidden>Amos</option>
          <option hidden>Obadiah</option>
          <option hidden>Jonah</option>
          <option hidden>Micah</option>
          <option hidden>Nahum</option>
          <option hidden>Habakkuk</option>
          <option hidden>Zephaniah</option>
          <option hidden>Haggai</option>
          <option hidden>Zechariah</option>
          <option hidden>Malachi</option>
          <option selected>Matthew</option>
          <option>Mark</option>
          <option>Luke</option>
          <option>John</option>
          <option>Acts</option>
          <option>Romans</option>
          <option>1st Corinthians</option>
          <option>2nd Corinthians</option>
          <option>Galatians</option>
          <option>Ephesians</option>
          <option>Philippians</option>
          <option>Colossians</option>
          <option>1st Thessalonians</option>
          <option>2nd Thessalonians</option>
          <option>1st Timothy</option>
          <option>2nd Timothy</option>
          <option>Titus</option>
          <option>Philemon</option>
          <option>Hebrews</option>
          <option>James</option>
          <option>1st Peter</option>
          <option>2nd Peter</option>
          <option>1st John</option>
          <option>2nd John</option>
          <option>3rd John</option>
          <option>Jude</option>
          <option>Revelation</option>
        </select>
        <select
          name="chapters"
          id="chapters"
          onChange='refresh("verse"); select()'
        ></select>
        <b>:</b>
        <select name="verses" id="verses" onChange="select()"></select>
        &nbsp;&nbsp;
        <button
          title="previous verse"
          type="button"
          onmousedown="decrease()"
          onmouseup="clearInterval(clicked)"
        >
          â—€
        </button>
        <button
          title="next verse"
          type="button"
          onmousedown="increase()"
          onmouseup="clearInterval(clicked)"
        >
          â–¶
        </button>
        &nbsp;&nbsp;
        <select id="filter" onchange="changeSettings()">
          <option value="blank">Filter</option>
          <option value="cl1">Class 1</option>
          <option value="cl2">Class 2</option>
          <option value="cl0">Critical Text</option>
          <option value="base">Restoration</option>
          <option value="intl">Interlinear</option>
        </select>
        &nbsp;&nbsp;
        <a
          title="legend"
          href="legend.htm"
          onclick='window.open("legend.htm","popUp","height=640,width=640,top=100,left=800,scrollbars=yes"); return false'
          >ðŸ›ˆ</a
        >
      </form>
    </header>
    <object id="display" type="text/html"></object>

    <script>
      'use strict';
      var clicked;
      var bcv = [
        [
          31,
          25,
          24,
          26,
          32,
          22,
          24,
          22,
          29,
          32,
          32,
          20,
          18,
          24,
          21,
          16,
          27,
          33,
          38,
          18,
          34,
          24,
          20,
          67,
          34,
          35,
          46,
          22,
          35,
          43,
          54,
          33,
          20,
          31,
          29,
          43,
          36,
          30,
          23,
          23,
          57,
          38,
          34,
          34,
          28,
          34,
          31,
          22,
          33,
          26,
        ],
        [
          22,
          25,
          22,
          31,
          23,
          30,
          29,
          28,
          35,
          29,
          10,
          51,
          22,
          31,
          27,
          36,
          16,
          27,
          25,
          26,
          37,
          30,
          33,
          18,
          40,
          37,
          21,
          43,
          46,
          38,
          18,
          35,
          23,
          35,
          35,
          38,
          29,
          31,
          43,
          38,
        ],
        [
          17,
          16,
          17,
          35,
          26,
          23,
          38,
          36,
          24,
          20,
          47,
          8,
          59,
          57,
          33,
          34,
          16,
          30,
          37,
          27,
          24,
          33,
          44,
          23,
          55,
          46,
          34,
        ],
        [
          54,
          34,
          51,
          49,
          31,
          27,
          89,
          26,
          23,
          36,
          35,
          16,
          33,
          45,
          41,
          35,
          28,
          32,
          22,
          29,
          35,
          41,
          30,
          25,
          19,
          65,
          23,
          31,
          39,
          17,
          54,
          42,
          56,
          29,
          34,
          13,
        ],
        [
          46,
          37,
          29,
          49,
          33,
          25,
          26,
          20,
          29,
          22,
          32,
          31,
          19,
          29,
          23,
          22,
          20,
          22,
          21,
          20,
          23,
          29,
          26,
          22,
          19,
          19,
          26,
          69,
          28,
          20,
          30,
          52,
          29,
          12,
        ],
        [
          18,
          24,
          17,
          24,
          15,
          27,
          26,
          35,
          27,
          43,
          23,
          24,
          33,
          15,
          63,
          10,
          18,
          28,
          51,
          9,
          45,
          34,
          16,
          33,
        ],
        [
          36,
          23,
          31,
          24,
          31,
          40,
          25,
          35,
          57,
          18,
          40,
          15,
          25,
          20,
          20,
          31,
          13,
          31,
          30,
          48,
          25,
        ],
        [22, 23, 18, 22],
        [
          28,
          36,
          21,
          22,
          12,
          21,
          17,
          22,
          27,
          27,
          15,
          25,
          23,
          52,
          35,
          23,
          58,
          30,
          24,
          42,
          16,
          23,
          28,
          23,
          43,
          25,
          12,
          25,
          11,
          31,
          13,
        ],
        [
          27,
          32,
          39,
          12,
          25,
          23,
          29,
          18,
          13,
          19,
          27,
          31,
          39,
          33,
          37,
          23,
          29,
          32,
          44,
          26,
          22,
          51,
          39,
          25,
        ],
        [
          53,
          46,
          28,
          20,
          32,
          38,
          51,
          66,
          28,
          29,
          43,
          33,
          34,
          31,
          34,
          34,
          24,
          46,
          21,
          43,
          29,
          54,
        ],
        [
          18,
          25,
          27,
          44,
          27,
          33,
          20,
          29,
          37,
          36,
          20,
          22,
          25,
          29,
          38,
          20,
          41,
          37,
          37,
          21,
          26,
          20,
          37,
          20,
          30,
        ],
        [
          54,
          55,
          24,
          43,
          41,
          66,
          40,
          40,
          44,
          14,
          47,
          41,
          14,
          17,
          29,
          43,
          27,
          17,
          19,
          8,
          30,
          19,
          32,
          31,
          31,
          32,
          34,
          21,
          30,
        ],
        [
          18,
          17,
          17,
          22,
          14,
          42,
          22,
          18,
          31,
          19,
          23,
          16,
          23,
          14,
          19,
          14,
          19,
          34,
          11,
          37,
          20,
          12,
          21,
          27,
          28,
          23,
          9,
          27,
          36,
          27,
          21,
          33,
          25,
          33,
          26,
          23,
        ],
        [11, 70, 13, 24, 17, 22, 28, 36, 15, 44],
        [11, 20, 38, 17, 19, 19, 72, 18, 37, 40, 36, 47, 31],
        [22, 23, 15, 17, 14, 14, 10, 17, 32, 3, 17, 8, 30, 16, 24, 10],
        [
          22,
          13,
          26,
          21,
          27,
          30,
          21,
          22,
          35,
          22,
          20,
          25,
          28,
          22,
          35,
          22,
          16,
          21,
          29,
          29,
          34,
          30,
          17,
          25,
          6,
          14,
          21,
          28,
          25,
          31,
          40,
          22,
          33,
          37,
          16,
          33,
          24,
          41,
          30,
          32,
          26,
          17,
        ],
        [
          6,
          11,
          9,
          9,
          13,
          11,
          18,
          10,
          21,
          18,
          7,
          9,
          6,
          7,
          5,
          11,
          15,
          51,
          15,
          10,
          14,
          32,
          6,
          10,
          22,
          11,
          14,
          9,
          11,
          13,
          25,
          11,
          22,
          23,
          28,
          13,
          40,
          23,
          14,
          18,
          14,
          12,
          5,
          27,
          18,
          12,
          10,
          15,
          21,
          23,
          21,
          11,
          7,
          9,
          24,
          14,
          12,
          12,
          18,
          14,
          9,
          13,
          12,
          11,
          14,
          20,
          8,
          36,
          37,
          6,
          24,
          20,
          28,
          23,
          11,
          13,
          21,
          72,
          13,
          20,
          17,
          8,
          19,
          13,
          14,
          17,
          7,
          19,
          53,
          17,
          16,
          16,
          5,
          23,
          11,
          13,
          12,
          9,
          9,
          5,
          8,
          29,
          22,
          35,
          45,
          48,
          43,
          14,
          31,
          7,
          10,
          10,
          9,
          8,
          18,
          19,
          2,
          29,
          176,
          7,
          8,
          9,
          4,
          8,
          5,
          6,
          5,
          6,
          8,
          8,
          3,
          18,
          3,
          3,
          21,
          26,
          9,
          8,
          24,
          14,
          10,
          8,
          12,
          15,
          21,
          10,
          20,
          14,
          9,
          6,
        ],
        [
          33,
          22,
          35,
          27,
          23,
          35,
          27,
          36,
          18,
          32,
          31,
          28,
          25,
          35,
          33,
          33,
          28,
          24,
          29,
          30,
          31,
          29,
          35,
          34,
          28,
          28,
          27,
          28,
          27,
          33,
          31,
        ],
        [18, 26, 22, 17, 19, 12, 29, 17, 18, 20, 10, 14],
        [17, 17, 11, 16, 16, 12, 14, 14],
        [
          31,
          22,
          26,
          6,
          30,
          13,
          25,
          23,
          20,
          34,
          16,
          6,
          22,
          32,
          9,
          14,
          14,
          7,
          25,
          6,
          17,
          25,
          18,
          23,
          12,
          21,
          13,
          29,
          24,
          33,
          9,
          20,
          24,
          17,
          10,
          22,
          38,
          22,
          8,
          31,
          29,
          25,
          28,
          28,
          25,
          13,
          15,
          22,
          26,
          11,
          23,
          15,
          12,
          17,
          13,
          12,
          21,
          14,
          21,
          22,
          11,
          12,
          19,
          11,
          25,
          24,
        ],
        [
          19,
          37,
          25,
          31,
          31,
          30,
          34,
          23,
          25,
          25,
          23,
          17,
          27,
          22,
          21,
          21,
          27,
          23,
          15,
          18,
          14,
          30,
          40,
          10,
          38,
          24,
          22,
          17,
          32,
          24,
          40,
          44,
          26,
          22,
          19,
          32,
          21,
          28,
          18,
          16,
          18,
          22,
          13,
          30,
          5,
          28,
          7,
          47,
          39,
          46,
          64,
          34,
        ],
        [22, 22, 66, 22, 22],
        [
          28,
          10,
          27,
          17,
          17,
          14,
          27,
          18,
          11,
          22,
          25,
          28,
          23,
          23,
          8,
          63,
          24,
          32,
          14,
          44,
          37,
          31,
          49,
          27,
          17,
          21,
          36,
          26,
          21,
          26,
          18,
          32,
          33,
          31,
          15,
          38,
          28,
          23,
          29,
          49,
          26,
          20,
          27,
          31,
          25,
          24,
          23,
          35,
        ],
        [21, 49, 100, 34, 30, 29, 28, 27, 27, 21, 45, 13, 64, 42],
        [9, 25, 5, 19, 15, 11, 16, 14, 17, 15, 11, 15, 15, 10],
        [20, 27, 5, 21],
        [15, 16, 15, 13, 27, 14, 17, 14, 15],
        [21],
        [16, 11, 10, 11],
        [16, 13, 12, 14, 14, 16, 20],
        [14, 14, 19],
        [17, 20, 19],
        [18, 15, 20],
        [15, 23],
        [17, 17, 10, 14, 11, 15, 14, 23, 17, 12, 17, 14, 9, 21],
        [14, 17, 24],
        [
          25,
          23,
          17,
          25,
          48,
          34,
          29,
          34,
          38,
          42,
          30,
          50,
          58,
          36,
          39,
          28,
          27,
          35,
          30,
          34,
          46,
          46,
          39,
          51,
          46,
          75,
          66,
          20,
        ],
        [45, 28, 35, 41, 43, 56, 37, 38, 50, 52, 33, 44, 37, 72, 47, 20],
        [
          80,
          52,
          38,
          44,
          39,
          49,
          50,
          56,
          62,
          42,
          54,
          59,
          35,
          35,
          32,
          31,
          37,
          43,
          48,
          47,
          38,
          71,
          56,
          53,
        ],
        [
          51,
          25,
          36,
          54,
          47,
          71,
          53,
          59,
          41,
          42,
          57,
          50,
          38,
          31,
          27,
          33,
          26,
          40,
          42,
          31,
          25,
        ],
        [
          26,
          47,
          26,
          37,
          42,
          15,
          60,
          40,
          43,
          48,
          30,
          25,
          52,
          28,
          41,
          40,
          34,
          28,
          40,
          38,
          40,
          30,
          35,
          27,
          27,
          32,
          44,
          31,
        ],
        [32, 29, 31, 25, 21, 23, 25, 39, 33, 21, 36, 21, 14, 23, 33, 27],
        [31, 16, 23, 21, 13, 20, 40, 13, 27, 33, 34, 31, 13, 40, 58, 24],
        [24, 17, 18, 18, 21, 18, 16, 24, 15, 18, 33, 21, 13],
        [24, 21, 29, 31, 26, 18],
        [23, 22, 21, 32, 33, 24],
        [30, 30, 21, 23],
        [29, 23, 25, 18],
        [10, 20, 13, 18, 28],
        [12, 17, 18],
        [20, 15, 16, 16, 25, 21],
        [18, 26, 17, 22],
        [16, 15, 15],
        [25],
        [14, 18, 19, 16, 14, 20, 28, 13, 28, 39, 40, 29, 25],
        [27, 26, 18, 17, 20],
        [25, 25, 22, 19, 14],
        [21, 22, 18],
        [10, 29, 24, 21, 21],
        [13],
        [15],
        [25],
        [
          20,
          29,
          22,
          11,
          14,
          17,
          17,
          13,
          21,
          11,
          19,
          18,
          18,
          20,
          8,
          21,
          18,
          24,
          21,
          15,
          27,
          21,
        ],
      ];

      preselect(window.location.href.split('?')[1] || '40001001'); // split URL at "?"
      document.getElementById('display').contentWindow.focus();
      window.name = 'parent';

      // jump to preselected location
      function preselect(start) {
        var book, chapter, verse;
        window.history.replaceState(null, null, window.location.pathname); // show the default URL

        // check for valid book/chapter/verse
        if (!/[4-6][0-9]0[0-2][0-9][0-1][0-9][0-9]/.test(start))
          [book, chapter, verse] = [39, 0, 0];
        else {
          [book, chapter, verse] = [
            Number(start.substr(0, 2)) - 1,
            Number(start.substr(2, 3)) - 1,
            Number(start.substr(5, 3)) - 1,
          ];
          if (
            !bcv[book] ||
            !bcv[book][chapter] ||
            verse > bcv[book - 1][chapter - 1]
          )
            [book, chapter, verse] = [39, 0, 0];
        }

        // select the specified verse
        document.form.books.selectedIndex = book;
        refresh('chapter');
        document.form.chapters.selectedIndex = chapter;
        refresh('verse');
        document.form.verses.selectedIndex = verse;
        select();
      }

      // refresh the chapter and verse options
      function refresh(unit) {
        switch (
          unit // flows through, no breaks
        ) {
          case 'chapter':
            document.form.chapters.length = 0; // delete old chapter options
            for (
              let i = 0;
              i < bcv[document.form.books.selectedIndex].length;
              i++
            )
              document.form.chapters.options[i] = new Option(
                i + 1,
                i + 1,
                false,
                false
              );
          case 'verse':
            document.form.verses.length = 0; // delete old verse options
            for (
              let i = 0;
              i <
              bcv[document.form.books.selectedIndex][
                document.form.chapters.selectedIndex
              ];
              i++
            )
              document.form.verses.options[i] = new Option(
                i + 1,
                i + 1,
                false,
                false
              );
        }
      }

      // select the file to display
      function select() {
        debugger;
        document.getElementById('display').data =
          'https://greekcntr.org/collation/data/' +
          ('0' + (document.form.books.selectedIndex + 1)).slice(-2) +
          ('00' + (document.form.chapters.selectedIndex + 1)).slice(-3) +
          ('00' + (document.form.verses.selectedIndex + 1)).slice(-3) +
          '.htm';
        document.getElementById('display').contentWindow.focus();
      }

      // go to next book/chapter/verse
      function next(unit) {
        switch (unit) {
          case 'book':
            if (document.form.books.selectedIndex + 1 < bcv.length) {
              document.form.books.selectedIndex++;
              refresh('chapter');
            }
            break;
          case 'chapter':
            if (
              document.form.chapters.selectedIndex + 1 <
              document.form.chapters.options.length
            ) {
              document.form.chapters.selectedIndex++;
              refresh('verse');
            } else next('book');
            break;
          case 'verse':
            if (
              document.form.verses.selectedIndex + 1 <
              document.form.verses.options.length
            )
              document.form.verses.selectedIndex++;
            else next('chapter');
        }
      }

      // go to previous book/chapter/verse
      function previous(unit) {
        //alert(unit+" "+books.selectedIndex+" "+chapters.selectedIndex+" "+verses.selectedIndex);
        switch (unit) {
          case 'book':
            if (document.form.books.selectedIndex > 39) {
              document.form.books.selectedIndex--;
              refresh('chapter');
            }
            break;
          case 'chapter':
            if (document.form.chapters.selectedIndex > 0) {
              document.form.chapters.selectedIndex--;
              refresh('verse');
            } else if (document.form.books.selectedIndex > 39) {
              previous('book');
              {
                document.form.chapters.selectedIndex =
                  document.form.chapters.options.length - 1;
                refresh('verse');
              }
            }
            break;
          case 'verse':
            if (document.form.verses.selectedIndex > 0)
              document.form.verses.selectedIndex--;
            else if (
              document.form.books.selectedIndex > 39 ||
              document.form.chapters.selectedIndex
            ) {
              previous('chapter');
              document.form.verses.selectedIndex =
                document.form.verses.options.length - 1;
            }
        }
        //alert("end "+unit+" "+books.selectedIndex+" "+chapters.selectedIndex+" "+verses.selectedIndex);
      }

      // increase or decrease one verse by clicking on arrow keys
      function increase() {
        next('verse');
        select();
        clicked = setInterval(function() {
          next('verse');
          select();
        }, 200);
      }
      function decrease() {
        previous('verse');
        select();
        clicked = setInterval(function() {
          previous('verse');
          select();
        }, 200);
      }

      // change book/chapter/verse by keyboard
      function keypress(event) {
        var key, ch;
        key = event.keyCode || event.which; // for IE .keyCode, other browsers event.which
        ch = String.fromCharCode(key);
        switch (ch) {
          case 'B':
            previous('book');
            select();
            break;
          case 'b':
            next('book');
            select();
            break;
          case 'C':
            previous('chapter');
            select();
            break;
          case 'c':
            next('chapter');
            select();
            break;
          case 'V':
            previous('verse');
            select();
            break;
          case 'v':
            next('verse');
            select();
            break;
        }
      }

      // load filter settings
      function loadSettings() {
        var options = [],
          select = document.getElementById('filter');
        if (sessionStorage.getItem('cfilters') === null) {
          // if stored filters did not previously exist
          for (let i = 0; i < select.options.length; i++)
            options[i] = '+' + select.options[i].value;
          sessionStorage.setItem('cfilters', options.join(','));
        } else options = sessionStorage.getItem('cfilters').split(',');
        for (let i = 1; i < options.length; i++)
          if (options[i].charAt(0) == '+')
            select.options[i].style.backgroundColor = '#C0E0FF';
      }

      // change filter settings
      function changeSettings() {
        var select = document.getElementById('filter'),
          chosen = select.selectedIndex;
        var options = sessionStorage.getItem('cfilters').split(',');
        if (options[chosen].charAt(0) == '+') {
          select.options[chosen].style.backgroundColor = 'white';
          options[chosen] = '-' + options[chosen].substr(1);
        } else {
          select.options[chosen].style.backgroundColor = '#C0E0FF';
          options[chosen] = '+' + options[chosen].substr(1);
        }
        sessionStorage.setItem('cfilters', options.join(','));
        select.selectedIndex = 0;
        debugger;
        document
          .getElementById('display')
          .contentDocument.location.reload(true);
        document.getElementById('display').contentWindow.focus();
      }
    </script>
  </body>
</html>
